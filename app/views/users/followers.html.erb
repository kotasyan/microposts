<h1>followers</h1>

<!-- followersが空でない場合 -->
<% if @follower_users.any? %>
<div class="row">
    <ol class="followers">
    <% @follower_users.each do |follower| %>
       <li class="folower">
            <div class="col-md-2 col-md-offset-2">
                <!-- Gravatarへのリンクを表示 -->
                <%= link_to gravatar_for(follower, size: 50), follower %>
            </div>
            <!-- ユーザーの詳細画面へのリンクを表示 -->
            <span class="user col-md-4">
                <%= link_to follower.name, follower %>
            </span>
            <div class="btn col-md-2">
                <!-- ログインユーザーがfollowerではない場合 -->
                <% if logged_in? && current_user != follower %>
                    <div id="follow_form">
                    <!-- 現在のユーザーがfollowerをフォローしている場合 -->
                    <% if current_user.following?(follower) %>
                        <!-- アンフォローボタンを表示 -->
                        <%= form_for(current_user.following_relationships.
                                     find_by(followed_id: follower.id),
                                     html: { method: :delete }, 
                                     remote: true) do |f| %>
                        <%= f.submit "Unfollow", class: "btn" %>
                        <% end %>
                    <% else %>
                        <!-- フォローしていない場合は、フォローボタンを表示 -->
                        <%= form_for(current_user.following_relationships.build,
                                     remote: true) do |f| %>
                        <div><%= hidden_field_tag :followed_id, follower.id %></div>
                        <%= f.submit "Follow", class: "btn btn-primary" %>
                        <% end %>
                    <% end %>
                    </div>
                <% end %>
            </div>
        </li>
    <% end %>
    </ol>
<% end %>
</div>